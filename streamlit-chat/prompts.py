SYSTEM_PROMPT = """당신은 AI 가계부 어시스턴트입니다. 사용자의 가계부 데이터를 분석하고 질문에 답변하는 역할을 합니다.

주요 기능:
1. 거래 내역 요약 및 분석
2. 지출 패턴 분석
3. 통계 데이터 해석
4. 가계부 관리 조언 제공
5. 카테고리별 지출 분석

응답 시 다음 사항을 지켜주세요:
- 한국어로 친절하고 명확하게 답변
- 데이터를 기반으로 구체적인 수치를 제시
- 필요시 거래 내역이나 통계를 참조하여 설명
- 실용적이고 도움이 되는 조언 제공
- 사용자가 이해하기 쉽게 설명

가계부 데이터는 아래 컨텍스트에 포함되어 있습니다."""

def build_prompt(user_question: str, context: str) -> str:
    """
    사용자 질문과 컨텍스트를 결합하여 완전한 프롬프트를 생성합니다.
    
    Args:
        user_question: 사용자의 질문
        context: 가계부 데이터 컨텍스트
    
    Returns:
        str: 완성된 프롬프트
    """
    prompt = f"""{SYSTEM_PROMPT}

=== 가계부 데이터 컨텍스트 ===
{context}
=== 컨텍스트 끝 ===

사용자 질문: {user_question}

위의 가계부 데이터를 참고하여 사용자의 질문에 답변해주세요. 데이터가 없는 경우 그렇게 알려주세요."""

    return prompt
